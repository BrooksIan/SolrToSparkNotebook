{"paragraphs":[{"text":"%md\n\n## Connecting Apache Solr to Apache Spark\n\n**Language**: Scala\n**Requirements**: \n- [HDP 2.6.X]\n- Spark 2.x\n\n**Author**: Ian Brooks\n**Follow** [LinkedIn - Ian Brooks PhD] (https://www.linkedin.com/in/ianrbrooksphd/)\n","user":"admin","dateUpdated":"2018-05-23T08:24:46-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true},"editorMode":"ace/mode/markdown","editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1527089047081_1724167200","id":"20180523-082407_1420843928","dateCreated":"2018-05-23T08:24:07-0700","dateStarted":"2018-05-23T08:24:42-0700","dateFinished":"2018-05-23T08:24:44-0700","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:18176"},{"text":"%dep\nz.load(\"com.lucidworks.spark:spark-solr:3.0.4\")\n\n//Must be used before SparkInterpreter (%spark) initialized\n//Hint: put this paragraph before any Spark code and restart Zeppelin/Interpreter\n","user":"admin","dateUpdated":"2018-05-23T08:33:18-0700","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520018394264_2029145292","id":"20180302-172833_1647463014","dateCreated":"2018-03-02T11:19:54-0800","dateStarted":"2018-05-23T08:33:18-0700","dateFinished":"2018-05-23T08:33:27-0700","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:18177"},{"text":"%spark2\n\nsc\nsc.version\n","user":"admin","dateUpdated":"2018-05-23T08:33:29-0700","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520018394270_2028375794","id":"20180228-182438_444603187","dateCreated":"2018-03-02T11:19:54-0800","dateStarted":"2018-05-23T08:33:29-0700","dateFinished":"2018-05-23T08:33:34-0700","status":"ERROR","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:18178"},{"text":"%spark2\n\nval options = Map(\n  \"collection\" -> \"tweets\",\n  \"zkhost\" -> \"localhost:2181/solr\"\n\n)\n\nval df = spark.read.format(\"solr\")\n  .options(options)\n  .load\n  \ndf.printSchema()\n\ndf.cache()","user":"admin","dateUpdated":"2018-05-23T08:34:46-0700","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520018394271_2027991045","id":"20180228-182512_1457175841","dateCreated":"2018-03-02T11:19:54-0800","dateStarted":"2018-05-23T08:32:14-0700","dateFinished":"2018-05-23T08:32:15-0700","status":"ERROR","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:18179"},{"text":"%spark2 \n\ndf.count()","user":"admin","dateUpdated":"2018-04-13T13:51:21-0700","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520018394273_2013370587","id":"20180301-200025_999714821","dateCreated":"2018-03-02T11:19:54-0800","dateStarted":"2018-04-13T13:51:21-0700","dateFinished":"2018-04-13T13:53:18-0700","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:18180"},{"text":"%spark2\n\nval locations = df.filter(\"tweet_lang_s is not null\").select(\"tweet_lang_s\")\n//locations.take(10)\n\nlocations.createOrReplaceTempView(\"LocationsTweets\")\n","user":"admin","dateUpdated":"2018-04-13T13:53:30-0700","config":{"colWidth":12,"results":{},"enabled":true,"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520018394276_2012216340","id":"20180302-184803_563005872","dateCreated":"2018-03-02T11:19:54-0800","dateStarted":"2018-04-13T13:53:30-0700","dateFinished":"2018-04-13T13:53:31-0700","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:18181"},{"title":"Tweets by Locations","text":"%sql\n\nselect tweet_lang_s, count(tweet_lang_s) from locationstweets group by tweet_lang_s limit 999","user":"admin","dateUpdated":"2018-04-13T13:54:39-0700","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":6,"editorMode":"ace/mode/sql","title":true,"results":{"0":{"graph":{"mode":"pieChart","height":300,"optionOpen":false,"setting":{"pieChart":{}},"commonSetting":{},"keys":[{"name":"tweet_lang_s","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"count(tweet_lang_s)","index":1,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520018394278_2012985838","id":"20180302-185955_1611405281","dateCreated":"2018-03-02T11:19:54-0800","dateStarted":"2018-04-13T13:54:39-0700","dateFinished":"2018-04-13T13:54:43-0700","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:18182"},{"text":"%sql\n","user":"admin","dateUpdated":"2018-04-13T13:54:27-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1523652867437_90169974","id":"20180413-135427_1323466160","dateCreated":"2018-04-13T13:54:27-0700","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:18183"}],"name":"SolrToSpark","id":"2D7JS6TTC","angularObjects":{"2CJHMEY2N:shared_process":[],"2C8A4SZ9T_livy2:shared_process":[],"2CMUCW84V:shared_process":[],"2CMN8PT2P:shared_process":[],"2CM7G3PVG:shared_process":[],"2C4U48MY3_spark2:shared_process":[],"2CN3UF7FN:shared_process":[],"2CM6BCY3D:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}